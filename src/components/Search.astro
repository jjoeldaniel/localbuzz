---
interface Props {
    items: string[];
}
const { items } = Astro.props;
---

<div class="w-[650px] h-9 left-[166px] top-[340px] justify-start text-black text-3xl font-light font-['Nexa']">
    <label for="search-box" class="sr-only">Search:</label>
    <input type="search" id="search-box" placeholder="Search by product or vendor" class="w-full" />

    <div
        id="results-container"
        class="absolute top-full left-0 w-[650px] z-10 bg-white border border-gray-300 mt-12 text-black rounded-b-lg shadow-lg max-h-52 overflow-y-auto"
    >
    </div>
</div>

<script is:inline define:vars={{ items }}>
    const searchInput = document.getElementById("search-box");
    const resultsContainer = document.getElementById("results-container");

    // Hide results container initially
    resultsContainer.style.display = "none";

    searchInput.addEventListener("input", (e) => {
        const query = e.target.value.toLowerCase();

        // Clear previous results
        resultsContainer.innerHTML = "";

        if (query.length === 0) {
            resultsContainer.style.display = "none";
            return;
        }

        const filteredItems = items.filter((item) => item.toLowerCase().includes(query));

        if (filteredItems.length > 0) {
            resultsContainer.style.display = "block";
        } else {
            resultsContainer.style.display = "none";
        }

        // Create and append results with Tailwind classes
        filteredItems.forEach((item) => {
            const resultElement = document.createElement("div");
            // Add Tailwind classes for padding and hover effect
            resultElement.className = "px-3 py-2 cursor-pointer hover:bg-gray-100";
            resultElement.textContent = item;
            resultsContainer.appendChild(resultElement);
        });
    });

    // Optional: Hide results when clicking outside
    document.addEventListener("click", (e) => {
        if (!searchInput.contains(e.target)) {
            resultsContainer.style.display = "none";
        }
    });
</script>
